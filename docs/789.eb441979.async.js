"use strict";(self.webpackChunkeasy_material=self.webpackChunkeasy_material||[]).push([[789],{66789:function(Rt,Ee,s){s.r(Ee),s.d(Ee,{EasyButtonList:function(){return Kn},EasyCard:function(){return rn},EasyCardContent:function(){return ln},EasyDataGrid:function(){return En},EasyDetail:function(){return An},EasyModal:function(){return Jn},EasyToolBar:function(){return Ze},EasyUpload:function(){return ot},useAddItem:function(){return Me}});var Ve=s(5574),$=s.n(Ve),He=s(97857),d=s.n(He),Xe=s(13769),Be=s.n(Xe),h=s(67294),Qe=s(60265),J=s(87357),Ye=s(75316),Je=s(62623),qe=s(86867),_e=s(87952),en=s(28492),nn=s(41139),tn=s(72299),oe=s(69397),n=s(85893),an=["children","value","index"],on=function(e){var a=e.children,c=e.value,r=e.index,o=Be()(e,an);return(0,n.jsx)("div",d()(d()({role:"tabpanel",hidden:c!==r,id:"simple-tabpanel-".concat(r),"aria-labelledby":"simple-tab-".concat(r)},o),{},{children:c===r&&(0,n.jsx)(J.Z,{sx:{p:3},children:a})}))},Fe=(0,h.createContext)({});function Me(){var t=(0,h.useContext)(Fe),e=t.addItem;return e}var rn=function(e){var a=e.title,c=e.desc,r=e.sx,o=e.actions,v=e.children,u=e.defaultValue,x=u===void 0?0:u,i=e.avatar,l=i===void 0?{props:{}}:i,f=(0,h.useState)(x),g=$()(f,2),y=g[0],b=g[1],Z=(0,h.useState)({}),L=$()(Z,2),C=L[0],j=L[1],z=function(T){var U=d()({},C),k="tab-".concat(T.title);U[k]=T,j(d()({},U))},P=function(T,U){b(U)},O=function(T){return{id:"simple-tab-".concat(T),"aria-controls":"simple-tabpanel-".concat(T)}},w=function(T,U){var k=T.title;return(0,n.jsx)(Ye.Z,d()({label:k},O(U)),"tab-".concat(k))},E=function(T,U){var k=T.children;return(0,n.jsx)(on,{value:y,index:U,children:k},"tabpanel-".concat(U))};return(0,n.jsxs)(Je.Z,{children:[(0,n.jsx)(qe.Z,{avatar:(0,n.jsx)(_e.Z,d()(d()({sx:{bgcolor:Qe.Z[500]},"aria-label":"recipe"},l.props),{},{children:l&&l.children?(0,n.jsx)(n.Fragment,{children:l.children}):a?a.substring(0,1):""})),title:a,subheader:c}),(0,n.jsx)(Fe.Provider,{value:{addItem:z},children:v}),(0,n.jsx)(en.Z,{children:(0,n.jsxs)(J.Z,{sx:d()({width:"100%"},r),children:[(0,n.jsx)(J.Z,{sx:{borderBottom:1,borderColor:"divider"},children:(0,n.jsx)(nn.Z,{value:y,onChange:P,"aria-label":"basic tabs",children:Object.values(C).map(function(F,T){return w(F,T)})})}),Object.values(C).map(function(F,T){return E(F,T)})]})}),o&&(0,n.jsx)(tn.Z,{sx:{float:"right",mr:4},children:o.map(function(F){return(0,n.jsx)(oe.Z,{size:"small",onClick:F.onClick,children:F.label},F.label)})})]})},ln=function(e){var a=Me();(0,h.useEffect)(function(){a&&a(e)},[e])},un=s(19632),ne=s.n(un),sn=s(15009),_=s.n(sn),dn=s(99289),ge=s.n(dn),cn=s(9783),G=s.n(cn),le=s(90948),xe=s(41796),fn=s(61090),vn=s(73490),hn=s(98409),gn=s(64840),xn=s(76443);function pn(t){var e=t.page,a=t.count,c=t.rowsPerPage,r=t.onPageChange,o=t.className,v=Math.ceil(a/c),u=function(i,l){r(i,l-1)};return(0,n.jsx)(gn.Z,{color:"primary",className:o,count:v,page:e+1,onChange:u})}function Sn(t){return(0,n.jsx)(xn.x,d()({ActionsComponent:pn},t))}var Ae=s(96540),Pe=s(1849),Cn=s(23776),pe=s(22715),Le=s(91057),X=s(51233),ue=s(54799),se=s(21023),mn=s(42176),ze=(0,le.ZP)(Cn.Z)(function(t){var e=t.theme;return{"& .MuiInputLabel-root":{fontSize:"0.8rem"},"& .MuiInputBase-input":{fontSize:"0.8rem"},"& .MuiAutocomplete-popper":{fontSize:"0.8rem"},padding:e.spacing(0),textAlign:"center",width:"25ch",color:e.palette.text.secondary}}),De=(0,le.ZP)(pe.Z)(function(){return{"& .MuiTypography-root":{fontSize:"0.8rem",paddingRight:"8px"}}}),yn=h.memo(function(t){var e=t.columns,a=t.values,c=t.onSearch,r={},o={};e.forEach(function(w){w.search&&(r[w.field]=!1,o[w.field]=a!=null&&a[w.field]?a[w.field]:"")});var v=(0,h.useState)(r),u=$()(v,2),x=u[0],i=u[1],l=(0,h.useState)(o),f=$()(l,2),g=f[0],y=f[1],b=(0,h.useState)(0),Z=$()(b,2),L=Z[0],C=Z[1],j=function(){c==null||c(g)};(0,h.useEffect)(function(){L&&j()},[L]);var z=function(E){var F=E.headerName||E.field,T=E.searchOptions||[];T.some(function(W){return W.value===""})||T.unshift({value:"",label:"\u5168\u90E8"});var U=function(K,B){if(x[K]&&g[K]==="")return"";var R=B.find(function(M){return M.value===g[K]});return R?R.label:g[K]},k=U(E.field,T),Y=function(K,B){var R=T.find(function(A){return A.label===B});if(R){var M=R.value;g[E.field]!==M&&(y(d()(d()({},g),{},G()({},E.field,M))),C(L+1))}};return(0,n.jsx)(ze,{size:"small",disableClearable:!0,freeSolo:!0,forcePopupIcon:!0,value:k,options:T.map(function(W){return W.label}),onInputChange:Y,renderInput:function(K){return(0,n.jsx)(De,d()(d()({},K),{},{InputProps:d()(d()({},K.InputProps),{},{startAdornment:(0,n.jsx)(Le.Z,{position:"start",children:F}),type:"search"}),onFocus:function(){return i(d()(d()({},x),{},G()({},E.field,!0)))},onBlur:function(){i(d()(d()({},x),{},G()({},E.field,!1)))}}))}},"search-".concat(E.field))},P=function(E){var F=E.headerName||E.field,T=String(g[E.field]),U=function(Y,W){g[E.field]!==W&&y(d()(d()({},g),{},G()({},E.field,W)))};return(0,n.jsx)(ze,{size:"small",disableClearable:!0,freeSolo:!0,forcePopupIcon:!0,inputValue:T,options:[],onInputChange:U,renderInput:function(Y){return(0,n.jsx)(De,d()(d()({},Y),{},{sx:{"& .MuiOutlinedInput-root.MuiInputBase-sizeSmall":{paddingRight:"9px"}},InputProps:{startAdornment:(0,n.jsx)(Le.Z,{position:"start",children:F}),type:"search"},onFocus:function(){return i(d()(d()({},x),{},G()({},E.field,!0)))},onBlur:function(){i(d()(d()({},x),{},G()({},E.field,!1))),C(L+1)}}))}},"search-".concat(E.field))},O=function(E){return E.searchOptions!==void 0?z(E):P(E)};return(0,n.jsx)(X.Z,{direction:"row",spacing:1,children:e.filter(function(w){return w.search}).map(function(w){return O(w)})})}),me=(0,le.ZP)(ue.Z)(function(){return{fontSize:"0.6rem",border:"1px solid #c2c2c2",borderRadius:"5px",padding:"10px","& .MuiSvgIcon-root":{width:"1rem",height:"1rem"}}}),jn=function(e){var a=e.toolbar,c=e.showAddButton,r=e.showRefresh,o=e.onAddRow,v=e.onRefresh,u=function(i,l){return(0,n.jsx)(se.Z,{title:i.tooltip,children:(0,n.jsx)(me,{size:"small",onClick:i.onClick,"aria-label":i.tooltip,children:i.icon})},"baritem-".concat(l))};return(0,n.jsxs)(X.Z,{spacing:1,direction:"row",children:[a?a.map(function(x,i){return u(x,i)}):null,c?(0,n.jsx)(se.Z,{title:"\u65B0\u5EFA",children:(0,n.jsx)(me,{size:"small",onClick:o,"aria-label":"add to shopping cart",children:(0,n.jsx)(Ae.Z,{})})}):null,r?(0,n.jsx)(se.Z,{title:"\u5237\u65B0",children:(0,n.jsx)(me,{size:"small",onClick:v,"aria-label":"add to shopping cart",children:(0,n.jsx)(Pe.Z,{})})}):null]})},Tn=function(e){var a=e.columns,c=e.values,r=e.showAddButton,o=e.showRefresh,v=e.toolbar,u=e.onAddRow,x=e.onSearch,i=e.onRefresh,l=(0,h.useMemo)(function(){return a.some(function(y){return y.search})},[a,a.length]),f=r||o||v,g=f||l;return g?(0,n.jsxs)(mn.D,{children:[l?(0,n.jsx)(yn,{columns:a,onSearch:x,values:c}):null,(0,n.jsx)(J.Z,{sx:{flexGrow:1}}),f?(0,n.jsx)(jn,{toolbar:v,showAddButton:r,showRefresh:o,onAddRow:u,onRefresh:i}):null]}):null},bn=["pageSize","dataSource","columns","focusedRowEnabled","focusedRowKeys","autoNavigateToFocusedRow","showBorders","showAddButton","showRefresh","disablePagination","toolbar","onFocusedRowChanged","onAddRow"],Se=.2,Zn=(0,le.ZP)(fn._)(function(t){var e=t.theme;return G()({"& .MuiDataGrid-cell:focus":{outline:"none"}},"& .".concat(vn._.row),{"&.even":{backgroundColor:e.palette.action.hover,"&:hover, &.Mui-hovered":{backgroundColor:(0,xe.Fq)(e.palette.primary.main,Se),"@media (hover: none)":{backgroundColor:"transparent"}}},"&.Mui-selected":{backgroundColor:(0,xe.Fq)(e.palette.primary.main,Se+e.palette.action.selectedOpacity),"&:hover, &.Mui-hovered":{backgroundColor:(0,xe.Fq)(e.palette.primary.main,Se+e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:(0,xe.Fq)(e.palette.primary.main,Se+e.palette.action.selectedOpacity)}}}})});function wn(t){var e=t.dataSource,a=t.queryOptions,c=t.forceUpdate,r=e.store,o=a.values,v=a.page,u=a.pageSize,x=(0,h.useState)([]),i=$()(x,2),l=i[0],f=i[1],g=(0,h.useState)(!1),y=$()(g,2),b=y[0],Z=y[1],L=(0,h.useState)({}),C=$()(L,2),j=C[0],z=C[1];return(0,h.useEffect)(function(){ge()(_()().mark(function P(){var O,w;return _()().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:if(!(v<0)){F.next=2;break}return F.abrupt("return");case 2:O=Object.entries(o).map(function(T){return{key:T[0],value:T[1]}}).filter(function(T){return T.value!==""}),Z(!0),r.fetch?r.fetch({scope:O,page:v+1,pageSize:u}).then(function(T){f(T.data.results),z(function(){return{totalRowCount:T.data.total}}),Z(!1)}):r.rows&&(w=r.rows||[],f(w),z(function(){return{totalRowCount:w.length}}),Z(!1));case 5:case"end":return F.stop()}},P)}))()},[a,r.rows,c]),{rows:l,isLoading:b,pageInfo:j}}function Rn(t){return t.map(function(e){return e.type&&e.type==="date"&&(e.valueGetter=function(a){return new Date(a.row[e.field||""])}),e})}var In=h.forwardRef(function(t,e){var a=t.pageSize,c=a===void 0?100:a,r=t.dataSource,o=t.columns,v=t.focusedRowEnabled,u=v===void 0?!1:v,x=t.focusedRowKeys,i=t.autoNavigateToFocusedRow,l=i===void 0?!1:i,f=t.showBorders,g=f===void 0?!1:f,y=t.showAddButton,b=y===void 0?!1:y,Z=t.showRefresh,L=Z===void 0?!0:Z,C=t.disablePagination,j=C===void 0?!1:C,z=t.toolbar,P=t.onFocusedRowChanged,O=t.onAddRow,w=Be()(t,bn),E=r.store,F=(0,hn.A)(),T=(0,h.useState)({}),U=$()(T,2),k=U[0],Y=U[1],W=(0,h.useState)(!1),K=$()(W,2),B=K[0],R=K[1],M=(0,h.useState)([]),A=$()(M,2),m=A[0],p=A[1],S=(0,h.useState)({page:0,pageSize:c}),D=$()(S,2),I=D[0],V=D[1];(0,h.useEffect)(function(){u&&l&&x&&(F.current.setRowSelectionModel(ne()(x)),p(ne()(x)))},[u,x,l]);var q=(0,h.useMemo)(function(){return Rn(o)},[o]),ee=(0,h.useMemo)(function(){return{values:k,page:I.page,pageSize:I.pageSize}},[I,k]),ce=wn({dataSource:r,queryOptions:ee,forceUpdate:B}),we=ce.isLoading,ae=ce.rows,re=ce.pageInfo,Re=function(N){V(N)},Ce=(0,h.useState)(re.totalRowCount||0),fe=$()(Ce,2),ie=fe[0],ve=fe[1];(0,h.useEffect)(function(){ve(function(H){return re.totalRowCount!==void 0?re.totalRowCount:H})},[re.totalRowCount,ve]);var he=function(N){return N[E.key||"id"]},jt=function(N){if(P&&typeof P=="function"){var Ie=ae.filter(function(Ne){return N.includes(he(Ne))}),We=Ie[0];P({row:{data:We,keyList:N,paginationModel:I},component:{option:function(Ke){if(Ke==="focusRowKey")return he(We);if(Ke==="focusRowOption"){var Zt=ae.filter(function(wt){return N.includes(he(wt))});return Zt}return{}}}})}},Tt=d()({},g?{}:{border:"none"}),bt=(0,h.useCallback)(function(H){Y(H)},[]);return h.useImperativeHandle(e,function(){return{setFocusedRowKey:function(N){F.current.setRowSelectionModel([N]),p([N])},setFocusedRowKeys:function(N){N&&(F.current.setRowSelectionModel(ne()(N)),p(ne()(N)))},getSelectedRowIds:function(){return m},getRow:function(N){return ae.find(function(Ie){return he(Ie)===N})},refresh:function(){R(!B)}}}),(0,n.jsx)(J.Z,{sx:{height:"100%",width:"100%"},children:(0,n.jsx)(Zn,d()(d()({apiRef:F,sx:Tt,columns:q,getRowId:he,disableColumnFilter:!0,disableColumnSelector:!0,disableDensitySelector:!0,slots:{toolbar:function(){return Tn({columns:q,values:k,toolbar:z,showAddButton:b,showRefresh:L,onAddRow:O,onSearch:bt,onRefresh:function(){return R(!B)}})},pagination:j?null:Sn},hideFooter:j,pageSizeOptions:[c],rowCount:ie,paginationMode:"server",onPaginationModelChange:Re,paginationModel:I,loading:we,initialState:{pagination:{paginationModel:{pageSize:c}}},onRowSelectionModelChange:jt,getRowClassName:function(N){return N.indexRelativeToCurrentPage%2===0?"even":"odd"}},w),{},{rows:ae}))})}),En=In,Q=s(48263),ye=s(23972),Oe=s(67720),$e="13px",je="14px",Ue=$e;function Bn(t){var e=t.columns,a=t.rows,c=e.some(function(o){return!!o.actions}),r=c?{GridOne:3,GridTwo:5,GridThree:4}:{GridOne:3,GridTwo:9,GridThree:0};return(0,n.jsx)(n.Fragment,{children:e.map(function(o){var v;return(0,n.jsxs)(Q.ZP,{sx:{display:"flex",fontSize:Ue,margin:"2px 0",justifyContent:"space-between",alignItems:"start",minHeight:"30px",width:"100%",height:"max-content","& .MuiGrid-root.MuiGrid-item":{paddingTop:0,paddingLeft:0,height:"100%"}},container:!0,spacing:2,children:[(0,n.jsx)(Q.ZP,{md:r.GridOne,item:!0,children:(0,n.jsx)(ye.Z,{sx:{fontSize:je},children:o.labelName})}),(0,n.jsx)(Q.ZP,{md:r.GridTwo,item:!0,sx:{fontSize:je},children:o.renderCell?(0,n.jsx)(n.Fragment,{children:o.renderCell({rows:a})}):(0,n.jsx)(n.Fragment,{children:(v=a[o.field])!==null&&v!==void 0?v:"-"})}),(0,n.jsx)(Q.ZP,{md:r.GridThree,item:!0,sx:{display:"flex",justifyContent:"flex-end",fontSize:je},children:(o==null?void 0:o.actions)&&o.actions.map(function(u,x){return(0,n.jsx)(oe.Z,d()(d()({variant:"text",sx:{fontSize:$e,margin:"0 8px",position:"relative",transform:"translateY(-20%)",minWidth:"max-content"}},u.props),{},{children:u.label}),x)})})]},o.field)})})}function Fn(t){var e=t.config,a=t.showDivider,c=a===void 0?!0:a,r=t.rows,o=e.type,v=e.columns;return o!=="group"?null:(0,n.jsxs)(J.Z,{sx:{display:"flex",flexDirection:"column"},children:[(0,n.jsx)(Bn,{columns:v,rows:r}),c&&(0,n.jsx)(Oe.Z,{flexItem:!0,sx:{height:"100%",margin:"25px 0"}})]})}function Mn(t){var e=t.headerSlot,a=t.content,c=a===void 0?[]:a,r=t.rows,o=r===void 0?{}:r;return(0,n.jsxs)(J.Z,{sx:{fontSize:Ue},children:[e,(0,n.jsx)("div",{style:{marginTop:e?"26px":"0"},children:c.map(function(v,u){return(0,n.jsx)(Fn,{config:v,showDivider:u<c.length-1,rows:o},u)})})]})}var An=Mn,de=s(31812),Pn=s(24486),Ln=s(16628),Ge=s(63931),zn=s(72004),Dn=s.n(zn),On=s(12444),$n=s.n(On),Un=Dn()(function t(e){var a=this;$n()(this,t),G()(this,"dom",void 0),G()(this,"getTextWidth",function(c){if(a.dom&&c){var r;return a.dom.textContent=c,a==null||(r=a.dom)===null||r===void 0?void 0:r.clientWidth}return 0}),G()(this,"destroyDom",function(){a.dom&&(document.body.removeChild(a.dom),a.dom=null)}),this.dom=document.createElement("div"),this.dom.style.display="inline-block",this.dom.style.fontSize="".concat((e==null?void 0:e.fontSize)||12,"px"),this.dom.style.fontStyle=(e==null?void 0:e.fontStyle)||"normal",this.dom.style.fontWeight=(e==null?void 0:e.fontWeight)||"normal",this.dom.style.lineHeight="".concat((e==null?void 0:e.lineHeight)||16,"px"),document.body.appendChild(this.dom)}),Gn=Un,kn=12,Wn=4,Nn=6;function Kn(t){var e=t.actions,a=e===void 0?[]:e,c=t.config,r=c===void 0?{}:c,o=(0,h.useRef)(),v=(0,h.useRef)(null),u=r.buttonSize,x=u===void 0?kn:u,i=r.dividerMargin,l=i===void 0?Wn:i,f=r.buttonPadding,g=f===void 0?Nn:f,y=(0,h.useState)([]),b=$()(y,2),Z=b[0],L=b[1],C=(0,h.useState)([]),j=$()(C,2),z=j[0],P=j[1],O=(0,h.useState)(!1),w=$()(O,2),E=w[0],F=w[1],T=(0,h.useState)(null),U=$()(T,2),k=U[0],Y=U[1],W=!!k,K=function(p){p!=null&&p.currentTarget&&Y(p==null?void 0:p.currentTarget)},B=function(){Y(null)};(0,h.useEffect)(function(){var m;if(!o.current){for(var p=a.length,S=v==null||(m=v.current)===null||m===void 0?void 0:m.parentElement,D=g,I=a.length,V=0,q=new Gn({fontSize:x}),ee=0;ee<a.length;ee++){var ce=a[ee].label;a[ee].loading=!1;var we=q.getTextWidth(String(ce)),ae=l*2+1,re=ee===a.length-1,Re=re?0:ae;if(D+=Number(we)+g*2+Re,S!=null&&S.offsetWidth&&D>S.offsetWidth){I=ee,V+ae+16>S.offsetWidth&&(I=I-1),I<=0&&(I=1);break}V=D}q.destroyDom();for(var Ce=p>I,fe=[],ie=0;ie<I&&a[ie];ie++)fe.push(a[ie]);var ve=[];Ce&&(ve=a.slice(I,a.length)),L(fe),P(ve),F(Ce)}},[a]);var R=function(p,S){var D=Z.map(function(I,V){return p===V&&(I.loading=S),I});L(ne()(D))},M=function(p,S){var D=z.map(function(I,V){return p===V&&(I.loading=S),I});P(ne()(D))},A=function(p,S,D,I){var V;if(p!=null&&(V=p.props)!==null&&V!==void 0&&V.onClick){var q=p.props.onClick(I);q!=null&&q.then&&(o.current=!0,S(D,!0),q.finally(function(){S(D,!1),o.current=!1}))}};return(0,n.jsx)(X.Z,{direction:"row",sx:{justifyContent:"flex-start"},ref:v,component:"div",children:(0,n.jsx)(Q.ZP,{sx:{display:"flex",justifyContent:"flex-start",fontSize:"".concat(x,"px"),transform:"translateX(-".concat(g,"px)")},children:Z.map(function(m,p){return(0,n.jsxs)(h.Fragment,{children:[(0,n.jsx)(de.Z,d()(d()({loading:m.loading,sx:{fontSize:"".concat(x,"px"),fontWeight:"700",margin:"0",minWidth:"max-content",padding:"2px ".concat(g,"px")}},m.props),{},{onClick:function(D){A(m,R,p,D)},children:m.label})),(p<Z.length-1||E)&&(0,n.jsx)(Oe.Z,{sx:{margin:"0 ".concat(l,"px"),height:"60%",alignSelf:"center"},orientation:"vertical",variant:"middle",flexItem:!0}),!!(E&&p===Z.length-1)&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(ue.Z,{"aria-label":"more",id:"long-button","aria-controls":W?"fade-menu":void 0,"aria-haspopup":"true","aria-expanded":W?"true":void 0,onClick:K,size:"small",sx:G()({fontSize:"".concat(x,"px"),margin:"0",width:"22px",height:"22px",alignSelf:"center"},"& svg",{width:"0.7em",height:"0.7em"}),children:"\u66F4\u591A"}),(0,n.jsx)(Pn.Z,{id:"fade-menu",MenuListProps:{"aria-labelledby":"fade-button"},anchorEl:k,open:W,onClose:B,TransitionComponent:Ln.Z,elevation:0,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},sx:{fontSize:"".concat(x,"px")},children:z.map(function(S,D){return(0,n.jsxs)(Ge.Z,{sx:{fontSize:"".concat(x,"px"),display:"flex",justifyContent:"flex-start"},disabled:S.loading,onClick:function(V){A(S,M,D,V)},children:[S.loading&&(0,n.jsx)(de.Z,{loading:S.loading,sx:{fontSize:"".concat(x,"px"),margin:"0",minWidth:"max-content",padding:"2px 2px",marginRight:"10px"}}),S.loading&&(0,n.jsx)(n.Fragment,{children:"\xA0"}),S.label]},S.label)})})]})]},p)})})})}var Vn=s(20745),Hn=s(91894),Xn=s(64666),ke=s(37645),Qn=s(35713),Yn=s(4380),Te=function(e){var a=e.title,c=e.footer,r=e.okText,o=r===void 0?"\u786E\u8BA4":r,v=e.cancelText,u=v===void 0?"\u53D6\u6D88":v,x=e.open,i=x===void 0?!1:x,l=e.onOK,f=e.confirmLoading,g=e.onCancel,y=e.okButtonProps,b=e.maxWidth,Z=e.children,L=e.afterOpenChange;(0,h.useEffect)(function(){L&&L(i)},[i]);var C=d()({color:"primary"},y),j=function(){l&&l()},z=function(){g&&g()},P=function(){return c===void 0?(0,n.jsx)(Hn.Z,{sx:{px:2.5,pb:2.5},children:(0,n.jsxs)(X.Z,{direction:"row",spacing:2,children:[(0,n.jsx)(oe.Z,{color:"primary",variant:"outlined",onClick:z,children:u}),(0,n.jsx)(de.Z,d()(d()({variant:"contained",loading:f,onClick:j},C),{},{children:o}))]})}):c};return(0,n.jsxs)(Xn.Z,{open:i,onClose:z,maxWidth:b,fullWidth:!0,sx:{padding:5},children:[(0,n.jsx)(J.Z,{position:"absolute",top:8,right:8,children:(0,n.jsx)(ue.Z,{size:"small",onClick:z,children:"X"})}),a!==""?(0,n.jsx)(ke.Z,{children:a}):(0,n.jsx)(ke.Z,{sx:{py:2}}),(0,n.jsx)(Qn.Z,{sx:{pb:3},children:Z}),P()]})};Te.confirm=function(t){var e=t.onOK,a=e===void 0?function(){}:e,c=t.onCancel,r=c===void 0?function(){}:c,o=t.type,v=o===void 0?"error":o,u=t.title,x=t.message,i="easy-confirm",l=document.getElementById("root"),f,g,y=!0,b=!1;function Z(){y=!1,l&&f&&l.removeChild(f),f&&(f.innerHTML=""),f=null,setTimeout(function(){g&&g.unmount()},0)}var L=function(O){return(0,n.jsx)(Te,{okButtonProps:{color:v},title:u,open:y,onOK:function(){return O.handleOk()},confirmLoading:b,onCancel:O.handleClose,children:(0,n.jsx)(X.Z,{spacing:2,children:(0,n.jsx)(Yn.Z,{children:x})})})};function C(){r(),Z()}function j(){var P=a();console.log(P.then),P!=null&&P.then?(b=!0,g.render(L({handleOk:j,handleClose:C})),P.then(function(){}).finally(function(){b=!1,g.render(L({handleOk:j,handleClose:C})),setTimeout(function(){Z()},300)})):Z()}function z(){var P=document.getElementById(i);P?(f=P,f.innerHTML=""):(f=document.createElement("div"),f.id="easy-confirm",l&&l.appendChild(f)),y=!0,g=(0,Vn.createRoot)(f),g.render(L({handleOk:j,handleClose:C}))}z()};var Jn=Te,qn=s(64599),_n=s.n(qn),et=s(64041),nt=s(52778),tt=s(96486);function at(t){var e=t.config,a=t.deleteUploadFileByUid,c={error:"error.main",success:void 0,uploading:void 0};return(0,n.jsx)(se.Z,{title:e.tip,children:(0,n.jsxs)(Q.ZP,{sx:{display:"flex",flexDirection:"row",width:"100%",justifyContent:"space-between",alignItems:"center",fontSize:"14px",color:c[e.status||"success"]||void 0,"& span":{verticalAlign:"center",display:"inline-block"},"&:hover":{backgroundColor:"rgba(0, 0, 0, 0.02)",borderRadius:"4px",cursor:"pointer"}},children:[(0,n.jsxs)("div",{style:{display:"flex"},children:[e.loading?(0,n.jsx)(de.Z,{loading:e.loading,variant:"text"}):(0,n.jsx)(et.Z,{fontSize:"small",sx:{marginRight:"5px"}}),(0,n.jsx)("span",{children:e.name})]}),!e.loading&&(0,n.jsx)(ue.Z,{onClick:function(){a(e.uid)},children:(0,n.jsx)(nt.Z,{fontSize:"small",sx:{color:c[e.status||"success"]||void 0}})})]})},e.name)}function ot(t){var e=t.accept,a=t.multiple,c=a===void 0?!1:a,r=t.disabled,o=r===void 0?!1:r,v=t.maxCount,u=v===void 0?1:v,x=t.name,i=x===void 0?"file":x,l=t.beforeUpload,f=t.customRequest,g=f===void 0?null:f,y=t.children,b=t.showUploadList,Z=b===void 0?!0:b,L=t.onChange,C=t.fileList,j=t.onRemove,z=(0,h.useRef)(null),P=(0,h.useState)([]),O=$()(P,2),w=O[0],E=O[1],F=function(R){var M=!1,A=[],m=_n()(w),p;try{for(m.s();!(p=m.n()).done;){var S=p.value;R.uid===S.uid?(M=!0,A.push(d()(d()({},S),R))):A.push(S)}}catch(I){m.e(I)}finally{m.f()}if(!M){var D=w.length>=u;D&&A.shift(),A.push(R)}E([].concat(A))},T=function(R){var M=w.filter(function(A){return A.uid!==R});E(ne()(M)),j&&typeof j=="function"&&j({uid:R})},U=function(R,M){L&&typeof L=="function"&&L({file:R,fileList:w,event:M})},k=function(){var B=ge()(_()().mark(function R(M){var A;return _()().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:if(!l){p.next=13;break}return p.prev=1,p.next=4,l(M);case 4:return A=p.sent,p.abrupt("return",!(typeof A=="boolean"&&!A));case 8:return p.prev=8,p.t0=p.catch(1),p.abrupt("return",!1);case 11:p.next=14;break;case 13:return p.abrupt("return",!0);case 14:case"end":return p.stop()}},R,null,[[1,8]])}));return function(M){return B.apply(this,arguments)}}(),Y=function(){var B=ge()(_()().mark(function R(M,A){var m;return _()().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return S.next=2,k(M);case 2:if(S.sent){S.next=4;break}return S.abrupt("return");case 4:m=new FormData,m.append(i,M),g==null||g(m).then(function(D){D.code===200&&A("success","\u4E0A\u4F20\u6210\u529F\uFF01")}).catch(function(D){var I=D.data?D.data.msg+": "+D.data.data:"\u4E0A\u4F20\u5931\u8D25\uFF01";A("error",I)});case 7:case"end":return S.stop()}},R)}));return function(M,A){return B.apply(this,arguments)}}(),W=function(){var B=ge()(_()().mark(function R(M){var A,m;return _()().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:A=M.target.files||[],A.length===1?(m={uid:(0,tt.uniqueId)("easy_"),name:A[0].name,url:"",status:"uploading",tip:"",loading:!0},U(m,M),C||(F(m),Y(A[0],function(D,I){m.status=D,m.tip=I,m.loading=!1,F(m),U(m,M)})),M.target.value=""):console.error("\u6682\u4E0D\u652F\u6301\u591A\u6587\u4EF6\u4E0A\u4F20\uFF01");case 2:case"end":return S.stop()}},R)}));return function(M){return B.apply(this,arguments)}}(),K=function(){var R;o||z==null||(R=z.current)===null||R===void 0||R.click()};return(0,n.jsxs)(Q.ZP,{onClick:function(){},children:[(0,n.jsx)("input",{accept:e,multiple:c,onChange:W,type:"file",ref:z,style:{display:"none"}}),h.Children.map(y,function(B){return h.cloneElement(B,{disabled:o,onClick:function(){var M,A=!0;if(B!=null&&(M=B.props)!==null&&M!==void 0&&M.onClick){for(var m,p,S=arguments.length,D=new Array(S),I=0;I<S;I++)D[I]=arguments[I];A=B==null||(m=B.props)===null||m===void 0||(p=m.onClick)===null||p===void 0?void 0:p.call.apply(p,[m].concat(D))}A&&K()}})}),Z&&(0,n.jsx)(Q.ZP,{sx:{margin:"10px 0"},children:(C||w).map(function(B){return(0,n.jsx)(at,{config:B,deleteUploadFileByUid:T},B.uid)})})]})}function rt(t){var e=t.actions,a=e===void 0?[]:e,c=(0,h.useState)({}),r=$()(c,2),o=r[0],v=r[1];(0,h.useEffect)(function(){for(var i=a.length,l=0;l<i;l++){var f=a[l].label;f&&(o[f]=!1)}v(d()({},o))},[a]);var u=function(l,f){v(d()(d()({},o),{},G()({},l,f)))},x=function(l,f,g){var y;if(l!=null&&(y=l.props)!==null&&y!==void 0&&y.onClick){var b=l.props.onClick(g);b!=null&&b.then&&l.label&&(f(l.label,!0),b.finally(function(){l.label&&f(l.label,!1)}))}};return(0,n.jsx)(X.Z,{direction:"row",spacing:1,sx:{marginBottom:"10px"},component:"div",children:a.map(function(i,l){return(0,n.jsx)(h.Fragment,{children:i.hidden?null:(0,n.jsx)(de.Z,d()(d()({variant:"outlined",loading:i.label?o[i.label]:!1},i.props),{},{onClick:function(g){x(i,u,g)},children:i.label}))},l)})})}var te=(0,h.createContext)(null),it=function(e){var a=(0,h.useState)({show:!1,field:"",container:function(){}}),c=$()(a,2),r=c[0],o=c[1],v=(0,h.useState)({}),u=$()(v,2),x=u[0],i=u[1],l=(0,h.useCallback)(function(f){i(f)},[]);return(0,n.jsx)(te.Provider,{value:{searchState:x,setSearchState:l,containerState:r,setContainerState:o},children:e.children})},lt=it;function ut(){var t,e,a=(0,h.useContext)(te);return(0,n.jsx)(J.Z,{sx:{width:"100%",height:"max-content",minHeight:"150px",backgroundColor:"#f9fafb",borderRadius:"10px",display:a!=null&&(t=a.containerState)!==null&&t!==void 0&&t.show?"block":"none"},children:a==null||(e=a.containerState)===null||e===void 0?void 0:e.container()})}var st=s(58822);function dt(t){var e=t.field,a=t.onSearchChange,c=a===void 0?function(){}:a,r=(0,h.useContext)(te);return(0,n.jsx)(pe.Z,d()({label:"",sx:{width:"200px",fontSize:"0.875rem","& .MuiInputBase-root":{height:"100%"},"& .MuiInputBase-root.MuiOutlinedInput-root":{fontSize:"0.875rem"}},size:"small",placeholder:"\u641C\u7D22",value:r==null?void 0:r.searchState[e],onChange:function(v){r==null||r.setSearchState(d()(d()({},r.searchState),{},G()({},e,v.target.value)))},InputProps:{endAdornment:(0,n.jsx)(st.Z,{sx:{width:"1.25rem",height:"1.25rem",opacity:"0.7",cursor:"pointer","&:hover":{opacity:"1"}},onClick:function(){c({searchState:r==null?void 0:r.searchState,tableScope:{},target:{field:e,type:"SearchInput"}})}})}},t))}var ct=s(69587),ft=s(53640);function vt(t){var e,a=t.options,c=a===void 0?[{label:"\u6682\u65E0\u9009\u9879",value:void 0}]:a,r=t.field,o=t.onSearchChange,v=o===void 0?function(){}:o,u=(0,h.useContext)(te),x=function(f){if(u){var g=d()(d()({},u.searchState),{},G()({},r,f));console.log(f,u),u==null||u.setSearchState(g)}};(0,h.useEffect)(function(){if(c.length>0&&c[0].value!==void 0){var l;x((l=c[0])===null||l===void 0?void 0:l.value)}},[]);var i=function(f){var g;if(f!=null&&(g=f.target)!==null&&g!==void 0&&g.value){var y,b;x(f==null||(y=f.target)===null||y===void 0?void 0:y.value);var Z=d()(d()({},u==null?void 0:u.searchState),{},G()({},r,f==null||(b=f.target)===null||b===void 0?void 0:b.value));v({searchState:Z,tableScope:{},target:{field:r,type:"SelectInput"}})}};return(0,n.jsx)(ft.Z,{children:(0,n.jsx)(ct.Z,{size:"small",value:u==null?void 0:u.searchState[r],defaultValue:(e=c[0])===null||e===void 0?void 0:e.value,sx:{width:"200px",fontSize:"0.875rem",height:"100%"},onChange:i,children:c.map(function(l){return(0,n.jsx)(Ge.Z,{value:l.value,sx:{fontSize:"0.875rem"},children:l.label},l.label)})})})}var ht=s(92173),gt=s(1462),xt=s(16003),pt=(0,le.ZP)(ue.Z)(function(){return{fontSize:"0.6rem",border:"1px solid #c2c2c2",borderRadius:"5px",padding:"10px","& .MuiSvgIcon-root":{width:"1rem",height:"1rem"}}}),St=function(e){var a=e.tooltip,c=e.onClick,r=e.icon;return(0,n.jsx)(se.Z,{title:a,children:(0,n.jsx)(pt,{size:"small",onClick:c,children:r})})},be=St,Ct=function(e){var a,c,r=e.onSearchChange,o=(0,h.useContext)(te),v=o==null||(a=o.containerState)===null||a===void 0?void 0:a.field,u=(o==null?void 0:o.searchState[o==null||(c=o.containerState)===null||c===void 0?void 0:c.field])||[],x=(0,h.useState)({key:"",value:""}),i=$()(x,2),l=i[0],f=i[1],g=function(){var j;if(v){var z=(j=o==null?void 0:o.searchState[v])!==null&&j!==void 0?j:[],P=z.some(function(O){return O.key===l.key&&O.value===l.value});!P&&l.key&&(z.push(l),o==null||o.setSearchState(d()(d()({},o==null?void 0:o.searchState),{},G()({},v,z))))}},y=function(j,z){if(v){var P=o==null?void 0:o.searchState[v];if(P){var O=P.filter(function(w){return w.key!==j||w.value!==z});o==null||o.setSearchState(d()(d()({},o==null?void 0:o.searchState),{},G()({},v,O)))}}},b=function(j,z){f(d()(d()({},l),{},G()({},j,z)))},Z=function(j){y(j.key,j.value)},L=function(){o==null||o.setSearchState(d()(d()({},o==null?void 0:o.searchState),{},G()({},v,[])))};return(0,n.jsxs)(J.Z,{sx:{padding:"20px"},children:[(0,n.jsxs)(X.Z,{direction:"row",spacing:1,children:[(0,n.jsx)(pe.Z,{value:l.key,onChange:function(j){b("key",j.target.value)},placeholder:"\u952E",sx:{width:"200px"},size:"small"}),(0,n.jsx)(pe.Z,{value:l.value,onChange:function(j){b("value",j.target.value)},placeholder:"\u503C",sx:{width:"200px"},size:"small"}),(0,n.jsx)(be,{icon:(0,n.jsx)(Ae.Z,{}),onClick:function(){g()}})]}),(0,n.jsxs)(X.Z,{spacing:0,sx:{marginTop:"20px"},children:[(0,n.jsx)(ye.Z,{variant:"body2",children:"\u6B64\u67E5\u8BE2\u529F\u80FD\u4EC5\u652F\u6301\u9009\u62E9\u4E0B\u62C9\u5217\u8868\u4E2D\u5DF2\u5B58\u5728\u7684\u952E\u548C\u503C\u3002"}),(0,n.jsx)(ye.Z,{variant:"body2",children:"\u652F\u6301\u6700\u591A20\u4E2A\u4E0D\u540C\u6807\u7B7E\u7684\u7EC4\u5408\u641C\u7D22\u3002\u5982\u679C\u8F93\u5165\u591A\u4E2A\u6807\u7B7E\uFF0C\u5219\u4E0D\u540C\u6807\u7B7E\u4E4B\u95F4\u4E3A\u4E0E\u7684\u5173\u7CFB\u3002"})]}),(0,n.jsx)(Q.ZP,{container:!0,sx:{pt:2,pb:2},children:o&&u.map(function(C){return(0,n.jsx)(xt.Z,{label:"".concat(C.key,"=").concat(C.value),variant:"outlined",onDelete:function(){Z(C)},sx:{mr:1,mb:1}},C.key+"="+C.value)})}),(0,n.jsxs)(X.Z,{direction:"row",spacing:1,sx:{justifyContent:"flex-end"},children:[(0,n.jsx)(oe.Z,{variant:"outlined",onClick:function(){r({searchState:o==null?void 0:o.searchState,tableScope:{},target:{field:v,type:"TagSearch"}})},children:"\u641C\u7D22"}),(0,n.jsx)(oe.Z,{variant:"outlined",onClick:function(){L()},children:"\u91CD\u7F6E"})]}),(0,n.jsx)(Q.ZP,{})]})};function mt(t){var e,a,c=t.label,r=c===void 0?"\u6807\u7B7E\u641C\u7D22":c,o=t.props,v=o===void 0?{}:o,u=t.field,x=t.onSearchChange,i=(0,h.useContext)(te),l=function(){return(0,n.jsx)(Ct,{onSearchChange:x})},f=function(){if(i){var b,Z=i==null?void 0:i.containerState,L=!Z.show;L&&(i==null||(b=i.containerState)===null||b===void 0?void 0:b.container)!==l&&(Z.container=l),Z.show=L,Z.field=u,i==null||i.setContainerState(d()(d()({},i==null?void 0:i.containerState),Z))}},g=(i==null||(e=i.searchState[u])===null||e===void 0?void 0:e.length)||0;return(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)(oe.Z,d()(d()({color:"inherit",variant:"outlined",endIcon:i!=null&&(a=i.containerState)!==null&&a!==void 0&&a.show?(0,n.jsx)(gt.Z,{}):(0,n.jsx)(ht.Z,{}),sx:{fontWeight:"normal"}},v),{},{onClick:f,children:[r,!!g&&" (".concat(g,")")]}))})}function yt(t){var e=t.actions,a=t.onSearchChange,c=(0,h.useContext)(te),r=function(u){if(u!=null&&u.searchState){var x=[],i=function(g){if(g===void 0)return!1;var y=u.target.type;return!(y==="SelectInput"&&g==="all")};if(u!=null&&u.searchState){var l=u==null?void 0:u.searchState;Object.keys(u.searchState).forEach(function(f){i(l[f])&&x.push({key:f,value:l[f]})}),u.tableScope=x}}a(u)},o=function(u){var x=u.type,i=u.props,l=u.field;switch(x){case"IconButton":return(0,n.jsx)(be,d()({},i));case"RefreshIconButton":return(0,n.jsx)(be,d()({tooltip:"\u5237\u65B0",icon:(0,n.jsx)(Pe.Z,{})},i));case"SearchInput":return(0,n.jsx)(dt,d()(d()({},i),{},{field:l,onSearchChange:r}));case"SelectInput":return(0,n.jsx)(vt,d()(d()({},i),{},{field:l,onSearchChange:r}));case"TagSearch":return(0,n.jsx)(mt,d()(d()({},i),{},{field:l,onSearchChange:r}));default:return(0,n.jsx)(n.Fragment,{})}};return(0,h.useEffect)(function(){var v={};e.forEach(function(u){u.field&&(v[u.field]=void 0)}),c==null||c.setSearchState(v)},[]),(0,n.jsx)(X.Z,{direction:"row",spacing:1,sx:{height:"40px",marginBottom:"10px"},children:e.map(function(v,u){return(0,n.jsx)(h.Fragment,{children:o(v)},u)})})}function Ze(t){var e=t.children;return(0,n.jsx)(lt,{children:(0,n.jsxs)(X.Z,{children:[(0,n.jsx)(Q.ZP,{sx:{width:"100%",margin:"6px 0 0px",justifyContent:"space-between"},container:!0,spacing:1,children:e}),(0,n.jsx)(ut,{})]})})}Ze.ButtonTool=rt,Ze.SearchTool=yt}}]);
